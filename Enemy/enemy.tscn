[gd_scene load_steps=12 format=3 uid="uid://dtljdkolleihi"]

[ext_resource type="Script" uid="uid://cxkrxpdtltjh" path="res://Enemy/enemy.gd" id="1_2pb1h"]
[ext_resource type="PackedScene" uid="uid://cucid3eir3dv7" path="res://Assets/3D_Assets/Character/Gear/Tall_Shield.glb" id="2_m6jha"]
[ext_resource type="PackedScene" uid="uid://ch1vyjkdj16m8" path="res://Player/rig.tscn" id="2_px1sc"]
[ext_resource type="PackedScene" uid="uid://kha3rtcnssdw" path="res://Player/health_component.tscn" id="3_am0pq"]
[ext_resource type="PackedScene" uid="uid://cs7sb3u6ajmk2" path="res://Assets/3D_Assets/Character/Gear/Short_Shield.glb" id="3_glvfu"]
[ext_resource type="PackedScene" uid="uid://ed6lkk7a11iy" path="res://Assets/3D_Assets/Character/Gear/Longsword.glb" id="4_efk13"]
[ext_resource type="PackedScene" uid="uid://cucy6cmf83ctc" path="res://Player/area_attack.tscn" id="4_eqilm"]
[ext_resource type="PackedScene" uid="uid://s0wtyf8j8k6t" path="res://Assets/3D_Assets/Character/Gear/Battleaxe.glb" id="5_nmr1a"]
[ext_resource type="PackedScene" uid="uid://bxn6bhdnn235t" path="res://Assets/3D_Assets/Character/Gear/Broken_Sword.glb" id="6_47ove"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_am0pq"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_eqilm"]

[node name="Enemy" type="CharacterBody3D"]
collision_layer = 9
script = ExtResource("1_2pb1h")
shields = Array[PackedScene]([ExtResource("2_m6jha"), ExtResource("3_glvfu")])
weapons = Array[PackedScene]([ExtResource("4_efk13"), ExtResource("5_nmr1a"), ExtResource("6_47ove")])

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
avoidance_enabled = true

[node name="HealthComponent" parent="." node_paths=PackedStringArray("body") instance=ExtResource("3_am0pq")]
body = NodePath("..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_am0pq")

[node name="RigPivot" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="Rig" parent="RigPivot" instance=ExtResource("2_px1sc")]

[node name="Skeleton3D" parent="RigPivot/Rig/CharacterRig/GameRig" index="0"]
bones/0/position = Vector3(0.015321634, 0.9007748, -0.019290896)
bones/0/rotation = Quaternion(0.14096706, 1.18018896e-07, 1.680458e-08, 0.9900143)
bones/1/rotation = Quaternion(-0.053045638, 0.001454575, 0.02154895, 0.99835855)
bones/2/position = Vector3(1.8928417e-09, 0.14374201, 5.9774417e-09)
bones/2/rotation = Quaternion(0.009248763, -0.0015208874, -0.02390844, 0.99967027)
bones/3/position = Vector3(1.0656237e-09, 0.18897125, -3.4333798e-08)
bones/3/rotation = Quaternion(-0.17859738, 0.0077806935, -0.027940214, 0.98349476)
bones/4/position = Vector3(-3.6384606e-09, 0.087571405, -2.2252307e-09)
bones/4/rotation = Quaternion(0.3568378, -0.005186921, 0.100685656, 0.92871004)
bones/5/rotation = Quaternion(-0.09485658, -2.8746339e-09, -6.276492e-08, 0.995491)
bones/6/rotation = Quaternion(-0.17428681, -0.018612742, -0.06899644, 0.98209834)
bones/7/position = Vector3(0.015321607, 0.90077466, -0.019290794)
bones/7/rotation = Quaternion(-0.07824647, -0.7451622, -0.39448637, 0.53196937)
bones/8/position = Vector3(0.015321579, 0.90077466, -0.019290859)
bones/8/rotation = Quaternion(-0.0782464, 0.7451622, 0.39448634, 0.53196937)
bones/9/position = Vector3(0.1464653, 0.9665196, -0.004235862)
bones/9/rotation = Quaternion(0.99931276, -0.0016951022, -0.03417295, 0.014265964)
bones/10/position = Vector3(-1.33788705e-08, 0.2642674, 1.8433788e-10)
bones/10/rotation = Quaternion(-2.0541252e-08, -0.003885356, 1.2479133e-08, 0.9999925)
bones/11/position = Vector3(-2.7072115e-08, 0.2642674, 1.1179394e-08)
bones/11/rotation = Quaternion(0.5143378, -0.0036874374, 0.0035864552, 0.8575723)
bones/12/position = Vector3(1.5665806e-08, 0.22422206, 2.9066829e-08)
bones/12/rotation = Quaternion(2.9428438e-08, -0.0045571104, 3.6358657e-08, 0.9999896)
bones/13/position = Vector3(-1.8084789e-08, 0.22422206, 3.4594276e-08)
bones/13/rotation = Quaternion(-0.6411535, 0.020360515, -0.013864898, 0.7670172)
bones/14/position = Vector3(-1.37728495e-08, 0.13987769, 8.300418e-10)
bones/14/rotation = Quaternion(-0.00010033057, 0.96746135, -0.25301853, -0.00038247212)
bones/15/position = Vector3(-0.11582206, 0.96651953, -0.004235912)
bones/15/rotation = Quaternion(0.9583798, -0.000560348, 0.02479262, 0.28441754)
bones/16/position = Vector3(-9.390986e-09, 0.26536876, -5.710021e-08)
bones/16/rotation = Quaternion(-9.574929e-09, 0.0042867647, -2.2543416e-08, 0.9999908)
bones/17/position = Vector3(1.4771366e-08, 0.26536885, 8.594409e-09)
bones/17/rotation = Quaternion(0.43096685, 0.0043608337, -0.0023494428, 0.9023542)
bones/18/position = Vector3(8.5640135e-09, 0.22537619, 1.0205585e-09)
bones/18/rotation = Quaternion(-4.539451e-08, -0.008261881, 1.213054e-08, 0.9999659)
bones/19/position = Vector3(-5.799931e-09, 0.22537613, 3.7342924e-09)
bones/19/rotation = Quaternion(-0.6900574, -0.02839334, 0.0028705765, 0.72319186)
bones/20/position = Vector3(2.6330493e-11, 0.1398778, -8.130893e-09)
bones/20/rotation = Quaternion(-9.955449e-05, 0.96745974, -0.25302485, -0.00038308036)
bones/21/position = Vector3(0.03088495, 1.4083581, 0.09309504)
bones/21/rotation = Quaternion(-0.47916374, -0.24659558, -0.43639883, 0.72051984)
bones/22/position = Vector3(0.19773304, 1.4378232, 0.032836653)
bones/22/rotation = Quaternion(-0.07754213, -0.0042069727, 0.9900817, -0.117080554)
bones/23/position = Vector3(-5.0735824e-09, 0.1423119, -5.743358e-08)
bones/23/rotation = Quaternion(3.7742875e-08, -0.071095325, 3.140441e-08, 0.9974696)
bones/24/position = Vector3(-5.7138628e-08, 0.1423121, 1.5002101e-08)
bones/24/rotation = Quaternion(0.44669095, -0.08575458, -0.17920497, 0.8723526)
bones/25/position = Vector3(-2.511662e-08, 0.12591028, 1.4668196e-08)
bones/25/rotation = Quaternion(4.2335863e-08, 0.038834397, 3.3988215e-08, 0.99924564)
bones/26/position = Vector3(2.0001501e-08, 0.12591021, -3.1752796e-09)
bones/26/rotation = Quaternion(-0.016140483, 0.038831998, -0.15135597, 0.9875844)
bones/28/rotation = Quaternion(0.7025833, -0.00093979045, -0.001335505, 0.7115997)
bones/29/rotation = Quaternion(0.74112064, 0.0021826606, 0.0026539837, 0.6713632)
bones/30/rotation = Quaternion(0.3252695, 0.8900551, 0.29597712, -0.119996905)
bones/31/rotation = Quaternion(0.51488215, -0.11414927, 0.11448257, 0.8418789)
bones/32/rotation = Quaternion(0.5920036, -0.038135026, -0.09069874, 0.7999071)
bones/34/position = Vector3(-0.003169373, 0.09872068, 0.014791745)
bones/34/rotation = Quaternion(-0.06747007, 0.71844566, 0.06639643, 0.68911195)
bones/35/rotation = Quaternion(0.58080345, -0.0008918777, -0.0014975057, 0.814042)
bones/36/rotation = Quaternion(0.68277705, 0.0017451891, 0.002566148, 0.73062027)
bones/37/rotation = Quaternion(-0.0042650797, 0.7367137, 0.03947847, 0.67503804)
bones/38/position = Vector3(-0.0062295482, 0.09264146, -0.023634413)
bones/38/rotation = Quaternion(-0.10987274, 0.743351, 0.03335051, 0.6589728)
bones/39/rotation = Quaternion(0.63003856, 0.0015196438, 0.00237907, 0.7765587)
bones/40/rotation = Quaternion(0.65264326, -0.003081238, -0.004210613, 0.7576474)
bones/41/rotation = Quaternion(-0.068417504, 0.72411007, 0.033233866, 0.68547744)
bones/42/position = Vector3(-0.0071537, 0.067985795, -0.048198394)
bones/42/rotation = Quaternion(-0.12091298, 0.7991089, 0.035892114, 0.5878068)
bones/43/rotation = Quaternion(0.49869272, -0.020270592, -0.02569524, 0.8661608)
bones/44/rotation = Quaternion(0.71538454, 0.03530609, 0.057314288, 0.6954809)
bones/45/rotation = Quaternion(-0.1290595, 0.7289364, -0.02502596, 0.67184013)
bones/46/position = Vector3(-0.0054637464, 1.4104884, 0.09391132)
bones/46/rotation = Quaternion(-0.45600823, 0.28614008, 0.39905214, 0.7422518)
bones/47/position = Vector3(-0.17013647, 1.4595358, 0.04091767)
bones/47/rotation = Quaternion(-0.10810879, -0.28177494, 0.9268302, 0.22338593)
bones/48/position = Vector3(1.6012471e-09, 0.14342254, 4.3824343e-08)
bones/48/rotation = Quaternion(7.647467e-08, 0.03388894, 9.531624e-08, 0.99942565)
bones/49/position = Vector3(1.7157035e-08, 0.14342275, 2.3414295e-08)
bones/49/rotation = Quaternion(0.3603657, 0.05051343, 0.17274258, 0.91528416)
bones/50/position = Vector3(-9.289417e-08, 0.12706918, 3.6619753e-08)
bones/50/rotation = Quaternion(-3.5515836e-08, -0.019979674, -1.0082607e-07, 0.99980044)
bones/51/position = Vector3(1.3258058e-07, 0.12706931, 7.2634574e-09)
bones/51/rotation = Quaternion(0.15126324, -0.019967008, 0.025477065, 0.98796344)
bones/52/rotation = Quaternion(-0.25630003, 0.8558594, 0.029918544, -0.4482409)
bones/53/rotation = Quaternion(0.694912, 0.107144706, -0.10354833, 0.7034879)
bones/54/rotation = Quaternion(0.7411205, -0.0021827093, -0.0026540079, 0.67136323)
bones/55/rotation = Quaternion(-0.32526943, 0.89005524, 0.2959766, 0.11999794)
bones/56/rotation = Quaternion(0.5148819, 0.114150405, -0.114482954, 0.8418788)
bones/57/rotation = Quaternion(0.5920035, 0.03813468, 0.090699136, 0.79990697)
bones/59/position = Vector3(0.0031693694, 0.098720714, 0.014791885)
bones/59/rotation = Quaternion(0.13877109, -0.7049156, 0.15570953, 0.67793155)
bones/60/rotation = Quaternion(0.579984, 0.0462614, -0.030875515, 0.81272703)
bones/61/rotation = Quaternion(0.68277717, -0.0017471354, -0.002564562, 0.73062015)
bones/62/rotation = Quaternion(-0.0042653373, -0.7367137, -0.039478753, 0.67503786)
bones/63/position = Vector3(0.0062295543, 0.0926414, -0.023634387)
bones/63/rotation = Quaternion(0.10409551, -0.7196072, 0.18626244, 0.66078436)
bones/64/rotation = Quaternion(0.6706928, 0.01633909, -0.018566327, 0.7413228)
bones/65/rotation = Quaternion(0.69249856, 0.0033036591, 0.004039095, 0.72140044)
bones/66/rotation = Quaternion(-0.06841772, -0.7241101, -0.033233877, 0.68547726)
bones/67/position = Vector3(0.0071536656, 0.06798573, -0.04819838)
bones/67/rotation = Quaternion(0.10836411, -0.7682236, 0.16629077, 0.6086355)
bones/68/rotation = Quaternion(0.6299535, 0.029514832, 0.017750997, 0.7758687)
bones/69/rotation = Quaternion(0.8166777, -0.043953452, -0.05098612, 0.57315457)
bones/70/rotation = Quaternion(-0.1290598, -0.72893655, 0.025025813, 0.67183983)
bones/71/position = Vector3(0.12676254, 1.3296874, 0.013641385)
bones/71/rotation = Quaternion(0.023921698, 0.5669358, 0.8231587, 0.020529576)
bones/72/position = Vector3(-0.112908706, 1.3437338, 0.019023651)
bones/72/rotation = Quaternion(0.023921698, 0.5669358, 0.8231586, 0.020529576)

[node name="Knight_02" parent="RigPivot/Rig/CharacterRig/GameRig/Skeleton3D" index="1"]
visible = false

[node name="Villager_01" parent="RigPivot/Rig/CharacterRig/GameRig/Skeleton3D" index="2"]
visible = true

[node name="AnimationTree" parent="RigPivot/Rig" index="1"]
parameters/MoveSpace/blend_position = 0.01666666666666666

[node name="RightHandBone" parent="RigPivot/Rig" index="2"]
transform = Transform3D(-0.9624708, -0.25754708, -0.085553095, 0.17768025, -0.8363014, 0.518681, -0.20513304, 0.4840142, 0.85067636, -0.3381257, 1.0068015, -0.072687715)

[node name="LeftHandBone" parent="RigPivot/Rig" index="3"]
transform = Transform3D(-0.91177195, -0.4085588, -0.04185662, 0.20953998, -0.5504218, 0.8081639, -0.35322136, 0.7280907, 0.58746827, 0.23450592, 1.0170826, 0.24016589)

[node name="PlayerDetector" type="ShapeCast3D" parent="RigPivot"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_eqilm")
target_position = Vector3(0, 0, 1)
collision_mask = 4

[node name="AreaAttack" parent="RigPivot" instance=ExtResource("4_eqilm")]
target_position = Vector3(0, 1, 1)
collision_mask = 4

[connection signal="velocity_computed" from="NavigationAgent3D" to="." method="_on_navigation_agent_3d_velocity_computed"]
[connection signal="defeat" from="HealthComponent" to="." method="_on_health_component_defeat"]
[connection signal="heavy_attack" from="RigPivot/Rig" to="." method="_on_rig_heavy_attack"]

[editable path="RigPivot/Rig"]
[editable path="RigPivot/Rig/CharacterRig"]
